{"componentChunkName":"component---src-templates-article-tsx","path":"/2013/keeping-promise-to-indexeddb","result":{"data":{"mdx":{"fields":{"id":"89d555c3-2109-5529-b526-9a2f1eca9716","title":"Keeping a Promise to IndexedDb","slug":"/2013/keeping-promise-to-indexeddb","date":"2013-08-18T00:00:00.000Z","tags":["persistence","zen","code","promises","lïf"],"img":"/trust_building.jpg"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"date\": \"8/18/2013\",\n  \"description\": \"APIs are hellish things inconstant moons inconsistent interfaces intolerable incompatibility If you ...\",\n  \"draft\": false,\n  \"img\": \"trust_building.jpg\",\n  \"tags\": [\"persistence\", \"zen\", \"code\", \"promises\", \"lïf\"],\n  \"title\": \"Keeping a Promise to IndexedDb\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"APIs are hellish things: inconstant moons, inconsistent interfaces, intolerable\\xA0incompatibility. If you have not watched \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://worrydream.com/dbx\"\n  }), \"Bret Victor\\u2019s latest epic\"), \", I do recommend it. As he channels the spirit of innovation from the 1970s, he notes that it would be horrible if, 40 years from then, the only way two systems could communicate were through predefined and agreed upon interfaces. Indeed. What a terrible thing that would be it is.\"), mdx(\"p\", null, \"As I continue to build out my prototype for \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj-qdb\"\n  }), \"OJ\\u2019s qDb\"), \" component (trying to fulfill \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hiking.luddites.me/2013/06/a-promise-to-indexeddb.html\"\n  }), \"my promise to IndexedDb\"), \"), I have done a few of the obvious things. I automated the database connection in the constructor as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://plus.google.com/115052908021360451116\"\n  }), \"+Kyaw Tun\"), \"\\xA0recommended. I looked at\\xA0\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://plus.google.com/108530078008635144092\"\n  }), \"+Taylor Buley\"), \"\\u2019s\\xA0own \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/editor/indb\"\n  }), \"library\"), \" and make some tweaks accordingly. I have tested inserting up to a million records and selecting from the resulting object stores. There are some memory leaks to address and a few other performance issues before I\\u2019d recommend qDb on very, very large datasets\\u2014but it is in an OK state.\"), mdx(\"p\", null, \"Yet, as pleased as I am with the abstraction layer that I built, I feel a growing sense of frustration in this class of problem solving.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"First\"), \", as OJ has grown, it has become unwieldy. I finally decided to begin chunking it out into separate projects, which can each have their own test suites. They can be fully independent and therefore fully modular from OJ\\u2019s point of view. Currently, I have:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj\"\n  }), \"OJ\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj-namespace\"\n  }), \"OJ-NameSpace\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj-qdb\"\n  }), \"OJ-qDb\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj-sql\"\n  }), \"OJ-SQL\"))))), mdx(\"p\", null, \"This is nice. I can register each of these as NPM packages and list them as dependencies of OJ in its NPM config. The projects get versioned independently, greater decoupling them. And there was much rejoicing.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Second\"), \", as OJ has grown, it has become more tightly coupled internally. I personally detest the module pattern introduced in ES6, and I have never liked RequireJs or CommonJs\\u2019s module patterns. That is a rant for another day. I do very much like the idea of defining all dependencies of a class up front, and fortunately it is easy to do both that and to use the namespace pattern (which I far prefer), by using Promises to solve the dependency management.\"), mdx(\"p\", null, \"I have wanted to blog directly at this feature, but I felt I needed to start at the beginning. I think \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://gruntjs.com/\"\n  }), \"Grunt\"), \" is a critical, essential tool of the language and Grunt is necessary to solve this problem. I began \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hiking.luddites.me/2013/07/making-sense-of-grunt-importing.html\"\n  }), \"introducing a part of my own migration to Grunt\"), \"\\xA0and the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hiking.luddites.me/2013/07/api-documentation-considered-evil.html\"\n  }), \"churn required to get your own documentation generated from code\"), \". I intend to follow this through my own namespacing pattern, into Promises and out to utopia. Not today.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Third\"), \", as I have developed interfaces with more and more tools, I am increasingly aware of the fragility and incompatibility of the technologies we develop. Even between my own \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hiking.luddites.me/2013/03/currying-favor-with-partial-application.html\"\n  }), \"raw, JavaScript object SQL library\"), \" and my own IndexedDb abstraction, the two have completely different interfaces. I have been refactoring my \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://fogbugz.stackexchange.com/questions/7350/implementing-bugzilla-style-quips-using-fogbugz-plugin-architecture\"\n  }), \"Quips\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/quips\"\n  }), \"plugin\"), \"\\xA0to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.firebase.com/\"\n  }), \"Firebase\"), \", whose database API is completely different than anything I have already written (that\\u2019s not a complaint, Firebase is very awesome and looks quite promising).\"), mdx(\"p\", null, \"Neither anticipated the other. And that is a sin. A sin with a capital \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"In\"), \".\"), mdx(\"p\", null, \"Bret Victor notes that if two systems cannot learn how to communicate with each other (without so called \\u201CAPI\\u201Ds) that they cannot scale or survive. I think there is wisdom in this observation, and I think part of the answer is right in front of us.\"), mdx(\"p\", null, \"A Promise is an agreement to try to do one thing. That thing can only succeed or fail (and potentially never do either). We know how to communicate Promises\\u2014within JavaScript, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/kriskowal/q\"\n  }), \"Q\"), \" does a marvelous job transmogrifying loosely compliant promises into a standardized promises. Across languages, services, applications, architectures\\u2014we should think about agreeing upon, if nothing else, what it means to be a Promise and whether we agree to support it.\"), mdx(\"p\", null, \"It is not a complete solution to the challenge of connecting interfaces, but I promise it would help.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"89d555c3-2109-5529-b526-9a2f1eca9716","slug":"/2013/keeping-promise-to-indexeddb","previous":{"fields":{"id":"67346ddc-ee3e-5090-883b-0fe3e83e71fd","title":"Making Sense of Grunt: Importing an Existing Project","slug":"/2013/making-sense-of-grunt-importing","date":"2013-07-28T00:00:00.000Z","tags":["tools","code"],"img":"/grunt.jpg"},"tableOfContents":{"items":[{"url":"#step-1-what-is-grunt","title":"Step 1: What is Grunt"},{"url":"#step-2-your-project-is-now-an-npm-package","title":"Step 2: Your Project is Now an NPM Package"},{"url":"#step-3-identify-your-files","title":"Step 3: Identify Your Files"},{"url":"#step-4-create-the-gruntfile","title":"Step 4: Create the Gruntfile"},{"url":"#step-5-release","title":"Step 5: Release"}]},"parent":{"relativePath":"2013/making-sense-of-grunt-importing.md"},"frontmatter":{"title":"Making Sense of Grunt: Importing an Existing Project","subtitle":" Importing an Existing Project","date":"7/28/2013","tags":["tools","code"],"img":"grunt.jpg"}},"next":{"fields":{"id":"7d40f843-749e-580d-9d26-9f88ff66878e","title":"JavaScript (aka Marlboro Country)","slug":"/2013/javascript-aka-marlboro-country","date":"2013-01-03T00:00:00.000Z","tags":["code"],"img":"/marlboro_country.jpg"},"tableOfContents":{},"parent":{"relativePath":"2013/javascript-aka-marlboro-country.md"},"frontmatter":{"title":"JavaScript (aka Marlboro Country)","subtitle":null,"date":"1/3/2013","tags":["code"],"img":"marlboro_country.jpg"}},"pageTags":[{"name":"persistence","count":2},{"name":"zen","count":1},{"name":"code","count":20},{"name":"promises","count":2},{"name":"lïf","count":56}],"toc":{"type":"Article"},"title":"Keeping a Promise to IndexedDb","type":"Article"}},"staticQueryHashes":["1911835013"]}