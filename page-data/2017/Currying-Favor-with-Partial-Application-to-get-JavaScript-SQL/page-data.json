{"componentChunkName":"component---src-templates-article-tsx","path":"/2017/Currying-Favor-with-Partial-Application-to-get-JavaScript-SQL","result":{"pageContext":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"background\": \"../../assets/images/curry_favor.jpeg\",\n  \"date\": \"02/04/2017\",\n  \"description\": \"Editorâ€™s Note This is an old post from March of 2013 from an old blog Apparently it still gets enoug...\",\n  \"draft\": false,\n  \"tags\": [\"currying\", \"code\", \"partial\", \"application\"],\n  \"title\": \"Currying Favor with Partial Application to get JavaScript SQL\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Editor\\u2019s Note: This is an old post from March of 2013, from an old blog. Apparently it still gets enough hits to need updating as links have changed. Re-posting it here with URL corrections.\"), \"  \"), mdx(\"p\", null, \"There is a domain that attends to curry as one of the quintessential elements of regional cuisine. This is not that domain; though in this domain I would argue we need a paprika.  \"), mdx(\"p\", null, \"If the terms \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"curry\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"partial application\"), \" are at all unfamiliar to you, I highly recommend Reg Braithwaite\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://raganwald.com/2013/03/07/currying-and-partial-application.html\"\n  }), \"latest opus on the subject\"), \". Lending support are \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://plus.google.com/112487099551149077731\"\n  }), \"+Ben Alman\"), \" with his own \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://benalman.com/news/2012/09/partial-application-in-javascript/\"\n  }), \"eviscerating tour de force\"), \" as well as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://plus.google.com/110516491705475800224\"\n  }), \"+Axel Rauschmayer\"), \" with his \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.2ality.com/2011/09/currying-vs-part-eval.html\"\n  }), \"very, extremely, routinely reputable entry\"), \". If you\\u2019ve ever followed me here before, you may remember a fog surrounding an idea that touched on partial application from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://hiking.luddites.me/2013/01/good-reads.html\"\n  }), \"Good Reads\"), \", where I linked to (again to Mr. Braithwaite) \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/raganwald/homoiconic/blob/master/2013/01/practical-applications-of-partial-application.md\"\n  }), \"the skinny\"), \".  \"), mdx(\"p\", null, \"Do not be confused, dismayed, disheartened or discouraged. Currying and partial application are not easy-to-grok. The literature on the subject, while vast, is dense. Even in the most skilled hands, attempts to bring these tomes down from Mt. Sinai, have not routinely resulted in greater clarity.  \"), mdx(\"p\", null, \"But this is not yet-another-indoctrination on the subject. Defer to the authorities above for that. Here, I\\u2019m attempting to exploit the potential for good. Using both ingredients, it is possible to create a semantic for querying JavaScript objects in a syntax that resembles SQL. Are there other solutions to do this? \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://plus.google.com/108988276571177665337/posts/ahm5G625Vix\"\n  }), \"Yes\"), \".  \"), mdx(\"p\", null, \"Once you\\u2019ve apprehended grokation of the concepts, it should be straightforward to see the implementation of a few partial application standard methods: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://en.wikipedia.org/wiki/Map_%28higher-order_function%29\"\n  }), \"map\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://en.wikipedia.org/wiki/Filter_%28higher-order_function%29\"\n  }), \"filter\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29\"\n  }), \"fold\"), \". Lots of libraries have already done the diligence and written these for us but for the sake of having something to write, let\\u2019s implement them again (In the real world, you\\u2019re better off taking what \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://wiht.link/FunctionalJS\"\n  }), \"functional js\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://fitzgen.github.com/wu.js\"\n  }), \"wu.js\"), \" have already built)!  \"), mdx(\"p\", null, \"function curryLeft(func) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var slice = Array.prototype.slice;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var args = slice.call(arguments, 1);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return function() {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return func.apply(this, args.concat(slice.call(arguments, 0)));  \"), mdx(\"p\", null, \"}\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}  \"), mdx(\"p\", null, \"function foldLeft(func,newArray,oldArray) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var accumulation = newArray;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"each(oldArray, function(val) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"accumulation = func(accumulation, val);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"});\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return accumulation;  \"), mdx(\"p\", null, \"}  \"), mdx(\"p\", null, \"function map(func, array) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var onIteration = function(accumulation, val) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return accumulation.concat(func(val));\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"};\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return foldLeft(onIteration, \", \"[\", \"]\", \", array)\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}  \"), mdx(\"p\", null, \"function filter(func, array) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var onIteration = function(accumulation, val) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"if(func(val)) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return accumulation.concat(val);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"} else {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return accumulation;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"};\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return foldLeft(onIteration, \", \"[\", \"]\", \", array)\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}  \"), mdx(\"p\", null, \"With just these, we can do something that\\u2019s almost cool. We can extend the native Array class to add some new methods:  \"), mdx(\"p\", null, \"Object.defineProperties(Array.prototype, {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\u2019\", \"_\", \"where\\u2019: {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"value: function(func) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return filter(func, this);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"},\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\u2019\", \"_\", \"select\\u2019: {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"value: function(func) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return map(func, this);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"});  \"), mdx(\"p\", null, \"At this point, given an instance of an Array (thanks to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/marak/Faker.js/\"\n  }), \"Faker\"), \"), like:  \"), mdx(\"p\", null, \"var somePeople = \", \"[\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"{\\u201CFirstName\\u201D:\\u201CCristina\\u201D, \\u201CLastName\\u201D:\\u201CQuigley\\u201D, \\u201CPhoneNumber\\u201D:\\u201C1-189-868-2830\\u201D, \\u201CEmail\\u201D:\\u201D\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"mailto:Imelda@lourdes.ca\"\n  }), \"Imelda@lourdes.ca\"), \"\\u201D, \\u201CId\\u201D:0},\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"{\\u201CFirstName\\u201D:\\u201CEriberto\\u201D, \\u201CLastName\\u201D:\\u201CBailey\\u201D, \\u201CPhoneNumber\\u201D:\\u201C1-749-549-2050 x36612\\u201D, \\u201CEmail\\u201D:\\u201CPamela\", \"_\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"mailto:Gaylord@ludie.net\"\n  }), \"Gaylord@ludie.net\"), \"\\u201D, \\u201CId\\u201D:1},\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"{\\u201CFirstName\\u201D:\\u201CAmina\\u201D, \\u201CLastName\\u201D:\\u201CSchaden\\u201D, \\u201CPhoneNumber\\u201D:\\u201C463-301-9579 x9511\\u201D, \\u201CEmail\\u201D:\\u201CConner\", \"_\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"mailto:Gusikowski@jolie.tv\"\n  }), \"Gusikowski@jolie.tv\"), \"\\u201D, \\u201CId\\u201D:2}\", \"]\", \";  \"), mdx(\"p\", null, \"If we wanted to select the FirstName of each record, we could do something crude like:  \"), mdx(\"p\", null, \"somePeople.\", \"_\", \"select(function(row) { return row.FirstName });  \"), mdx(\"p\", null, \"But this is still too obtuse. With a little curry, we can make it better. We used partial application to get to \\u2018\", \"_\", \"select\\u2019, but we can switch gears to curry to get a better query mechanism. First, let\\u2019s define a query method: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Update: we technically don\\u2019t need curry here, as we\\u2019re not abstracting the \\u2018query\\u2019 object as a parameter. Thanks to Thomas Burette in the comments\"), \".  \"), mdx(\"p\", null, \"var query = function(array) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var tables = \", \"[\", \"]\", \";\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"tables.push(array);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var \", \"_\", \"query = {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"tables: tables,\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"from: from,\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"select: select,\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"run: run\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"};\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return \", \"_\", \"query;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"};  \"), mdx(\"p\", null, \"select and from methods are straightforward:  \"), mdx(\"p\", null, \"function select() {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var query = this;  \"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-text\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"var slice = Array.prototype.slice;  \\nvar args = slice.call(arguments, 0);  \\nquery.columns = query.columns || \\\\[\\\\];  \\neach(args, function(argumentValue) {  \\n    query.columns.push(argumentValue);  \\n});  \\nreturn query;  \"))), mdx(\"p\", null, \"}  \"), mdx(\"p\", null, \"function from(array) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var query = this;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"query.tables.push(array);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"return query;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"}  \"), mdx(\"p\", null, \"which then only leaves execution. I\\u2019ve deliberately not optimized this method for the purpose of illustration: in the absence of the tools, this is what such code looks like. Look at the redundancy and duplication. Marvel at the inelegance. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://prog21.dadgum.com/169.html\"\n  }), \"Appreciate the fact that it works\"), \".  \"), mdx(\"p\", null, \"function run() {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var query = this;\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var ret = \", \"[\", \"]\", \";\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"if (query.columns.length > 0) {\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var results = \", \"[\", \"]\", \";\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"each(query.columns, function(columnName) {  \"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-text\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"        each(query.tables, function(tbl) {  \\n            if (Array.isArray(tbl)) {  \\n                var res = {};  \\n                var val = tbl.\\\\_select(function(val) {  \\n                    return val\\\\[columnName\\\\];  \\n                });  \\n                if (val) {  \\n                    res\\\\[columnName\\\\] = val;  \\n                    results.push(res);  \\n                }  \\n            }  \\n        }, true);  \\n\\n    });  \\n\\n    var returnRows = \\\\[\\\\];  \\n    if(results && results.length > 0) {  \\n        var firstResult = results\\\\[0\\\\];  \\n\\n        each(firstResult, function(val, key) {  \\n\\n            each(val, function(cell){  \\n                var row = {};  \\n                row\\\\[key\\\\] = cell;  \\n                each(results.slice(1), function(result) {  \\n                    each(result, function(v,k){  \\n                        each(v, function(c) {  \\n                            row\\\\[k\\\\] = c;  \\n                        })  \\n                    },true)  \\n                },true)  \\n                returnRows.push(row);  \\n            },true);  \\n\\n        },true)  \\n\\n    }  \\n\\n}  \\nreturn returnRows;  \"))), mdx(\"p\", null, \"}  \"), mdx(\"p\", null, \"Now, this yields a syntax which looks a lot more like SQL:  \"), mdx(\"p\", null, \"var newQuery = query(people).select(\\u2018FirstName\\u2019, \\u2018LastName\\u2019);\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"var results = newQuery.run();  \"), mdx(\"p\", null, \"From here, \\u2018where\\u2019, \\u2018join\\u2019 (yes I said JOIN), \\u2018orderby\\u2019 and \\u2018groupby\\u2019 are all implementation details. This is just a proof-of-concept post, but given some large Faker data sets it already works quite well given its limitations. Refactoring \\u2018run\\u2019 into a method which utilizes partial application will yield mountains.  \"), mdx(\"p\", null, \"As always, everything I blog and code is public domain. You can view the source from the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/somecallmechief/oj-sql\"\n  }), \"oj-sql project here\"), \", collab with me on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://c9.io/somecallmechief/oj-sql\"\n  }), \"c9 here\"), \", or do whatever strikes your whim. May the wind that strikes your whim be always at your back.  \"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"date":"2017-02-04T00:00:00.000Z","id":"4ed31865-7a72-543d-8910-455b93974aac","slug":"/2017/Currying-Favor-with-Partial-Application-to-get-JavaScript-SQL","subtitle":null,"tags":["currying","code","partial","application"],"title":"Currying Favor with Partial Application to get JavaScript SQL"},"frontmatter":{"title":"Currying Favor with Partial Application to get JavaScript SQL","subtitle":null,"date":"02/04/2017","tags":["currying","code","partial","application"],"background":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6MY0HTQRlqDcJf/EABsQAAIDAAMAAAAAAAAAAAAAAAECABEhAzEy/9oACAEBAAEFAmMDClOck2L02kKaTz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAaEAACAgMAAAAAAAAAAAAAAAAQMQBBAREy/9oACAEBAAY/AojYtznL2P/EABwQAAIDAQEBAQAAAAAAAAAAAAERACExUUFhof/aAAgBAQABPyEfxqoViB1wBn1redguv0JsgTfJW0rKAEEEwqjIv2f/2gAMAwEAAgADAAAAELff/v/EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAwEBPxAjf//EABURAQEAAAAAAAAAAAAAAAAAAAEg/9oACAECAQE/ECP/xAAcEAEAAwEAAwEAAAAAAAAAAAABABEhMUFhgaH/2gAIAQEAAT8Qu1routhk8Au8GNh6uAWn7SDkS23Q+GnsBgF91FcC0fhk+nBHrZc8RZ0bP//Z","aspectRatio":0.8333333333333334,"width":200,"height":240,"src":"/static/a24cbb97c2a4f118d7fa84525c8fd8bc/f836f/curry_favor.jpg","srcSet":"/static/a24cbb97c2a4f118d7fa84525c8fd8bc/f836f/curry_favor.jpg 1x,\n/static/a24cbb97c2a4f118d7fa84525c8fd8bc/9dc27/curry_favor.jpg 1.5x,\n/static/a24cbb97c2a4f118d7fa84525c8fd8bc/2244e/curry_favor.jpg 2x"}}}},"parent":{"relativePath":"2017/Currying-Favor-with-Partial-Application-to-get-JavaScript-SQL.md"},"tableOfContents":{}},"next":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"background\": \"../../assets/images/there_and_back.jpg\",\n  \"date\": \"10/24/2017\",\n  \"description\": \"I canâ€™t remember a project engineering or otherwise during which I havenâ€™t paused to ask myself â€œWhy...\",\n  \"draft\": false,\n  \"subtitle\": \" There and Back Again\",\n  \"tags\": [\"metadata\", \"retrospective\", \"code\", \"generation\"],\n  \"title\": \"Code Generation: There and Back Again\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I can\\u2019t remember a project (engineering or otherwise) during which I haven\\u2019t paused to ask myself: \\u201CWhy did I design this thing that way?\\u201D Sometimes as a result of this introspection, I find myself feeling remorse or self-loathing, regret or the hollow embrace of ennui. Sometimes the buyer\\u2019s remorse can begin to settle in only after years of work. Sometimes the anthropomorphic representation of the design conceit simply lurks in the shadows sewing mischief as it\\u2019s able. I\\u2019ll defer to future versions of myself to conclude the relative merits or lack thereof of this particular set of concerns.  \"), mdx(\"p\", null, \"Every application\\u200A\\u2014\\u200Afrom this humble blog to the social behemoths starts with data. Most projects start with a fairly predictable set of questions: what language(s) are we going to write this thing in, what type of application is this, and where are we going to store the data? Vast amounts of our data is purely relational; equal volumes of equally critical data isn\\u2019t. At the end of the day, a relational database seemed the right choice\\u200A\\u2014\\u200Aand most grown up databases these days support storing and searching on structured and unstructured data.  \"), mdx(\"p\", null, \"I think this choice continues to make sense. Personally, I\\u2019ve always found managing relational databases at scale at the lower end of the spectrum of things which bring me joy as a developer. Data migrations, schema changes, wrestling with referential integrity constraints as customer requirements change\\u2026the whole mess of managing data leaves a foul taste that\\u2019s difficult to rinse out. So a younger version of myself, a rather clever fellow in his own mind, came up with a solution:  \"), mdx(\"p\", null, \"Code generation!  \"), mdx(\"p\", null, \"Looking back to the earliest commits in our repo, some of the very first were the JSON files that form the backbone of our code generating homunculus. A few simple properties in our library of JSON files are responsible for generating every C# class that backs the tables in our database. Tired of a property? Update a JSON file. Need more tables, more properties, more relationships? It\\u2019s all just JSON.  \"), mdx(\"p\", null, \"This makes other aspects of developing the architecture rather pleasant. Need to create or maintain a factory? Never write another line of factory code by hand. Need certain classes to implement an interface? Automate it. Need DTO versions of your table classes? Already done. RESTful web services that automatically implement ALL the verbs for every class and every possible relationship between entities? Our homunculus did that for you the day before you asked for it.  \"), mdx(\"p\", null, \"Orthogonally, at the database tier, we made a rather nice design choice to use globally unique ids. Our first table committed to code is a simple dictionary of Ids and Types. Every other table inherits from this base table, which means that given any valid Id, I can find the corresponding dog, cat, person or object with no extra information. When it comes to representing these data structures as REST resources, our routes can be as terse or verbose as desired. If we were so inclined, the route to add a dog to a person\\u2019s pets collection could be as simple as posting to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"/api/{personId}/{petId}\"), \", although in practice we rarely deviate from RESTful norms (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"/api/person/{personId}/pets/{petId}\"), \" is the actual route).  \"), mdx(\"p\", null, \"The flexibility that working with globally unique identifiers would be half as pleasant if we could not automatically create and maintain the factories required to fetch an object by id and then cast it to the appropriate implementation class. As objects mature, they often have a tendency to develop greater and deeper relationships with other objects in the database. Automatically generating these relationships and the pathways between them at every tier of our framework has been a boon.  \"), mdx(\"p\", null, \"I regret none of this automation. As long as fundamental design choices remain constant (or at least change slowly), vertical changes to the code\\u200A\\u2014\\u200Achanges to the JSON that result in the creation/deletion of code, scales smoothly.  \"), mdx(\"p\", null, \"Life gets much more interesting as we scale horizontally\\u200A\\u2014\\u200Achanging the templates that sit between the JSON and the final C# files. Diabolical bugs can lurk by manner of a single typo in a template, waiting to reproduce themselves across hundreds of files with the click of a button. Whitespace changes annoy to the extreme. We can (usually do) anticipate and surmount many of these hurdles. Frequent commits guarantee that noise doesn\\u2019t swallow avoidable faults. When refactoring a template, always make sure that optimization changes to the template code always produce identical outputs before other refactorings.  \"), mdx(\"p\", null, \"Changes to behavior lead to the nightmarish class of faults that lurk under the bed and are far more insidious: changes to validation logic, unique validation, how objects are cached inside a database transaction, when/how permissions are evaluated. It is trivial to change a template in such a way that crippling performance issues are immediately injected into the app. Fail to properly dispose an object, and the app can begin gradually leaking memory. Hunting down these bugs is time consuming and tedious.  \"), mdx(\"p\", null, \"Orthogonally (yet again), the technology choices we made to drive code generation are somewhat dated by today\\u2019s standards. T4 would be far easier to maintain than our antiquated format; and we have inconsistencies in where template code is defined: inside the template itself or in an external \\u201Ccode generation\\u201D project which has to be compiled before the templates can run. While it all technically works, the cost to maintain the code gen library has only increased over time\\u200A\\u2014\\u200Aand the cost to refactor the project to use modern frameworks is difficult to justify relative to providing new features that someone would be willing to pay for.  \"), mdx(\"p\", null, \"We have extracted a tremendous amount of value from this design decision overall, so I cannot condemn the philosophical approach we have taken; but within that bundle of ideas, design and technology choices there are multitudes of tiny decisions that certainly could have been better planned with an eye toward the future. The elegance of the design choices that I admire sadly must coexist with a certain amount of spaghetti, but such is the nature of development at times.  \"), mdx(\"p\", null, \"I suspect these dichotomies are somewhat ubiquitous in nature, but I do look forward to the opportunity to either perfect our approach to code generation or discover a superior path forward.  \"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"date":"2017-10-24T00:00:00.000Z","id":"28857393-7689-5936-9d14-6476feb91b4e","slug":"/2017/Code-Generation--There-and-Back-Again","subtitle":" There and Back Again","tags":["metadata","retrospective","code","generation"],"title":"Code Generation: There and Back Again"},"frontmatter":{"title":"Code Generation: There and Back Again","subtitle":" There and Back Again","date":"10/24/2017","tags":["metadata","retrospective","code","generation"],"background":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQME/9oADAMBAAIQAxAAAAFnnXJfnNGf/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAETEhIv/aAAgBAQABBQJR5qMOpmwmj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwJaf//EABkQAAMBAQEAAAAAAAAAAAAAAAABIRExQf/aAAgBAQABPyFeUSLfkeRJ6sOY3af/2gAMAwEAAgADAAAAEDv/AP/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EIr/xAAWEQEBAQAAAAAAAAAAAAAAAAAAIRH/2gAIAQIBAT8Q2q//xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMWFBUXH/2gAIAQEAAT8QoFPdwKMs7iRUfBg0VvLKAUHju5dgLDDCf//Z","aspectRatio":1.4184397163120568,"width":200,"height":141,"src":"/static/972a6409b42dc5c915877ba26d65b309/f836f/there_and_back.jpg","srcSet":"/static/972a6409b42dc5c915877ba26d65b309/f836f/there_and_back.jpg 1x,\n/static/972a6409b42dc5c915877ba26d65b309/9dc27/there_and_back.jpg 1.5x,\n/static/972a6409b42dc5c915877ba26d65b309/2244e/there_and_back.jpg 2x"}}}},"parent":{"relativePath":"2017/Code-Generation--There-and-Back-Again.md"},"tableOfContents":{}},"pageTags":[{"name":"currying","count":1},{"name":"code","count":21},{"name":"partial","count":1},{"name":"application","count":1}],"previous":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"background\": \"../../assets/images/cabrera_coat_of_arms.jpg\",\n  \"date\": \"01/16/2017\",\n  \"description\": \"The answer contrary to what one might naively assume is profoundly simple stare your employee square...\",\n  \"draft\": false,\n  \"tags\": [\"management\", \"leadership\", \"hiring\", \"work\"],\n  \"title\": \"How to Lose an Employee in 10 Seconds or Less\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The answer, contrary to what one might naively assume, is profoundly simple: stare your employee squarely in the face and say quite plainly and with complete sincerity, \\u201CGo fuck yourself.\\u201D So long as you do not make the mistake of apologizing, you will be rid of the parasitic worm leaching funds from your company\\u2019s precious coffers in record time. True, the conversation (should we elect to elevate this pitiful exchange of syllables to such exalted status) might last a few moments longer\\u200A\\u2014\\u200Abut the fatal blow will have been dealt.  \"), mdx(\"p\", null, \"Your employee might apologize for what he or she has perceived to be the trigger for your words, but a swift and confident, \\u201CPull your head out of your own ass \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"insert context specific vagaries here\"), \"\\u201D will dispense this drivel. Your employee may even try to appeal to emotion or to their own misconceived understanding of social norms, but simply remind them that it is their responsibility to cope with your management style, this managerial style is immutable, while subject to constant revision, and that failures to accept and embrace this style will be viewed as open hostility to yourself and to the company. When in doubt, consult the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.ece.rice.edu/~farbod/files/how-to-win.html\"\n  }), \"rules for arguing\"), \".  \"), mdx(\"p\", null, \"I am confident this exchange will not be further prolonged. Your employee may even walk out the metaphysical door without another feeble syllable in their defense.  \"), mdx(\"p\", null, \"Now, when is the right moment to deploy this intercontinental payload of confusion, this aggressive-aggressive/passive-aggressive bundle of joy?  \"), mdx(\"p\", null, \"Honestly, I haven\\u2019t the faintest idea however, it happened to me a little more than a year ago. I have been reflecting up the whole of its story since that time. I wanted to take a long pause to fully process the events in my own mind, but I have simultaneously felt a constant, nagging, nigh oppressive desire to write which I can no longer resist. The time, right or otherwise, has thrust itself into the forefront of my consciousness and refuses to be ignored.  \"), mdx(\"p\", null, \"The rest of this tale may have little material value to the rest of the world; though it should prove amusing to some. I learned something. Your mileage may vary.  \"), mdx(\"p\", null, \"A few days ago, I celebrated another year at Doctor Evidence (DrE), a company in which I strongly believe. This, by itself, would be an otherwise heartwarming milestone for myself but a triviality hardly worth noting for any readers who have wandered past. The cause for pause at this moment in time is less my own gratitude for passing yet another notch on the yardstick of time than it is for my enormous gratitude to be here at all\\u200A\\u2014\\u200Aand there is ample cause to be grateful.  \"), mdx(\"p\", null, \"To appreciate the context, we\\u2019ll need some. Rewind the clock more than three years.  \"), mdx(\"p\", null, \"The evening sauntered towards its inevitable end. I closed my laptop and called out to my wife. She did not respond. After some searching, I found her soaked to the bone, lying face down on the bare concrete in the carport in the brutal cold of early 2013. I still do not know whether she deliberately or merely accidentally attempted suicide that night, but I knew we needed help. Over that year, I struggled to keep my family together as I tried to solve my wife\\u2019s substance abuse. My hubris knew few limits. I honestly believed that \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"I\"), \" could \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fix\"), \" this.  \"), mdx(\"p\", null, \"Home life affected everything. By the fall, I was depressed, exhausted, suffering at work. I believe I had my first and only negative review that year after almost 7 years of near constant promotions, praise and loyal, excellent work. When Despair becomes your bedfellow, the darkness knows no boundaries.  \"), mdx(\"p\", null, \"Light, I often find, is insurmountable\\u200A\\u2014\\u200Athough the speed at which it arrives in practice is often at odds with theory. Quite unexpected and out of the blue, I received an email from Edan Shalev, (I am very pleased to call him now) my boss. He offered me a job. And not just any job. A chance to work from home; a significant raise; the opportunity to design an entire platform from the ground up. Complete creative control. The chance to save or at least improve human lives. How could I say no?  \"), mdx(\"p\", null, \"I felt enormously conflicted. My boss at the time, David Hessler, for whom I have the utmost respect and admiration, once said of me, \\u201CYou know what I love about you, Christopher? There are only two things in your world: things you\\u2019re excited about and things you haven\\u2019t discovered yet.\\u201D To date, it\\u2019s still the best compliment I have ever received. More than the respect and appreciation that David expressed to me then and on many other occasions, he and the whole company had invested greatly in my success.  \"), mdx(\"p\", null, \"I do not have a college degree. I dropped out of school and joined the Army. I learned Russian and managed to convince a publisher to let me write a book. I taught myself SQL and Visual Basic (for Applications) on a decrepit military laptop in the middle of constant mortar fire in Baghdad. And David hired me.  \"), mdx(\"p\", null, \"Not as a programmer, but as a systems engineer of sorts\\u200A\\u2014\\u200Aproviding personalized support to our most important customer. After a year of this, I was bored. I remember walking into David\\u2019s office one day to say, \\u201CI want into Development.\\u201D He said OK and our most senior developer, Steve Salter, began mentoring me. In all the years since, Steve is still the most brilliant engineer I\\u2019ve had the pleasure of calling peer and friend\\u200A\\u2014\\u200Aand for all our many arguments and my hotheadedness and my emotional reactions, Steve never gave up on me. Because of this, and perhaps solely because of this, I went from a lowly customer support worker to a senior web developer in about three years.  \"), mdx(\"p\", null, \"So, again, I felt conflicted. This was a company that had been exceedingly loyal to me; that had taken great risks on my future; that had trusted me. David\\u2019s company was acquired by another in the same week as my decision needed to be made; and, in the spirit of transitions, the decision to leave felt right in the end.  \"), mdx(\"p\", null, \"On October 1, 2013 I logged into Doctor Evidence\\u2019s systems for the first time from my home office. The future, though distant and elusive to the touch, nevertheless felt as though it exuded a general warmth and soft glow. Working from home, I could directly attend to my family. We had a chance to fix everything. We could fix everything. We would.  \"), mdx(\"p\", null, \"My ex-wife walked out the door on Sunday, December 1st, 2013. The last words she said to me were, \\u201CI never want to see you, this house or those children ever again.\\u201D  \"), mdx(\"p\", null, \"My two, most precious assets, my beautiful children have been in my sole custody ever since. The first six weeks were some of the most arduous of my life\\u200A\\u2014\\u200Aand I say this as a person that has survived blanket parties, direct fire, indirect fire, crashes and skirmishes and wars. The first week was the worst. Finding childcare for the kids, when every daycare in Ithaca has waiting lists on the order of months and years, would have been unimaginable without the help of friends and family and friends of family and family\\u2019s friend\\u2019s families.  \"), mdx(\"p\", null, \"Ithaca has often reminded me of my time in Germany. The summers are glorious beyond all human imagining. Surely, the Greeks had Ithaca, NY in their minds\\u2019 eyes when they envisioned Olympus. Then six months of winter arrive like an invasion force, snatch the sun from the sky and erect in its place a gloom, impenetrable and complete, leaving it to bear until the forces of Spring can usurp them. Darkness, literal. Real, biting Cold. Unrelenting misery.  \"), mdx(\"p\", null, \"But. Light abides. Spring returns. By the first, early glimpses of pure sunlight in 2014, the children and I were doing (if not well) far better than we had ever been before. The work at DrE was exciting and fulfilling.  \"), mdx(\"p\", null, \"All attempts at reconciliation with my ex-wife had failed. Uncertain what to do, but certain that I wanted to provide the best for my children, I soon filed for divorce. The legal process is least forgiving to the anxious, and such was the Anxiety that replaced Despair! Still, I was awarded sole custody of the children in relatively short order. The question of alimony/spousal maintenance would drag on until the end of the year.  \"), mdx(\"p\", null, \"Until very recently in New York, the question of alimony has been straightforward. The husband pays the wife 30% of his net income for a period determined by the length of the marriage and the wife\\u2019s ability to find employment. A plaintiff may argue that exigent circumstances merit a deviation from the default (e.g. the plaintiff has sole custody of the children of the marriage), but the judge has sole and final discretion on the matter.  \"), mdx(\"p\", null, \"On December 21, 2014, Despair found me once again at her mercy. The judge granted a narrow exception for the cost of my daughter\\u2019s preschool, but otherwise followed the formula. Beginning January 1, I needed to pay my ex-wife 50% of my gross income every month. The very first thought through my head screamed, \\u201CThank the gods you already paid for Christmas!\\u201D All of the following thoughts began crunching the numbers. I could find no conceivable path to keeping the house\\u200A\\u2014\\u200AI would inevitably default on the mortgage. I couldn\\u2019t afford the winter heat bill.  \"), mdx(\"p\", null, \"Only one option proved viable: default on the mortgage and move in with my parents (basement, to be precise). By the third week of 2015, I found myself a true millennial\\u200A\\u2014\\u200Aoccupying some 100\\u2013150 square meters in my parent\\u2019s basement. I think my kids were stronger than I was through this period.  \"), mdx(\"p\", null, \"As an engineering manager for a hugely successful bioinformatics company, there was a huge amount of self-imposed shame in losing my house and moving into my parents\\u2019 basement. As a father, I felt an overwhelming sense of impotence in not being able to provide for my children.  \"), mdx(\"p\", null, \"Concurrently, DrE was pursuing several high-profile bids for new business, and I felt a certain amount of stress and anxiety around the sheer volume of work demanded internally and from our customers (actual and prospective). At the time, I was extraordinarily anxious (and on all fronts). As a company, I felt that we were promising far more than we could deliver and that what we could deliver would not match the level of quality that I require of my work. I perceived there to be a implicit demand that our engineers work to the bone to accomplish this; consequently, I found myself working 10 and 12 and 14 hour days, working through weekends. I felt weary. Stretched. Thin. Beyond the totality of human fatigue, I had doubts: \\u201CWill this company even survive beyond this effort?\\u201D  \"), mdx(\"p\", null, \"Pause.  \"), mdx(\"p\", null, \"These feelings are incontrovertible, as all feelings are. Feelings are real, of course\\u200A\\u2014\\u200Abut they needn\\u2019t be overly burdened with facts. I doubt very much that anything can be done to argue with them or mutate them in any way; however, we can (I hope) process them better in the future. Thanks to retrospection, I can add one hugely valuable lesson to that list of hard lessons that only experience can supply: \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u201CDon\\u2019t make drastic life decisions when you are living in your parent\\u2019s basement.\\u201D\"), \" Variations include:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Don\\u2019t make drastic life decisions in the middle of a divorce  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Don\\u2019t make drastic life decisions while the bank is foreclosing on your house  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Don\\u2019t make drastic life decisions in the middle of winter in Ithaca, NY  \")), mdx(\"p\", null, \"Resume.  \"), mdx(\"p\", null, \"In early 2015, opportunity knocked again\\u200A\\u2014\\u200Aand again, quite unsolicited. A good friend of mine, David Furber, had recommended me to a local company (XCo) as a potential candidate for their next Chief Technology Officer (CTO).  \"), mdx(\"p\", null, \"Now the foreshadowing of my clickbait title has finally come full circle. How will our humble narrator find himself quitting in under ten seconds? What new catastrophes await? Who will fool whom? And so forth.  \"), mdx(\"p\", null, \"The bait-and-switch, I will confess to immediately. Eight long months crawled past before I found my ten second moment, but nearly every moment of those months I found more bizarre than the last.  \"), mdx(\"p\", null, \"I interviewed with Xco\\u2019s owners, a husband and wife duo, for the CTO position; and shortly thereafter, they offered me the job. To be even more precise, I was offered a salary. All XCo\\u2019s funding came through a series of government grants, and XCo had no formal employees\\u200A\\u2014\\u200Aexcept the duo, who were defined on the LLC proper. This duo had various other LLCs to account for other revenue streams (public speaking engagements, university teaching, publications), and it was never clear over which any or all of these I was intended to function (in spirit) as CTO. In the end, I was offered a salary to be paid out from a line item in a government grant\\u2019s budget, managed by a one of an out of state university\\u2019s many extension offices. Loud guarantees shouted that this was all very standard procedure in government/education space, nothing to worry about. The duo assured me that my own budget would permit hiring up to two additional developers in the first year, with an expansion of the team to be expected in the following year.  \"), mdx(\"p\", null, \"As someone who has worked hard to achieve everything I have, I find it challenging now to grapple with the cognitive disconnects I allowed then. On a fingernail or two of the one hand, this duo had each been divorced and were living in a joined family. They seemed to understand my current struggles, and they were offering their personal and professional support to help me through my own. They empathized with my predicament. On the other fist and a half, the whole proposal seemed perforated with warning signs. I couldn\\u2019t explain why I made this decision.  \"), mdx(\"p\", null, \"In retrospect, when someone offers to make you an officer of a company, a few things to have in writing: amendments to the articles of incorporation, access to the company records, documentation of your equity stake, an actual contract between the same company and yourself, a budget, and so forth.  \"), mdx(\"p\", null, \"Lacking hindsight, I trusted the duo at their word. I submitted my resignation to DrE and began at XCo on May 1, 2015. The most immediate problem was payroll. Though I didn\\u2019t know it at the time, I would not receive a paycheck for four months. Excuses were in no short supply: government grant policies had changed over the last year, new university extension policies on the distribution of grant funds had changed, my line item status on the grant was continually wrong from week to week to week, authorization was needed for my salary, and so forth. The duo insisted that it was my responsibility to negotiate the safe transport of my own salary from the university to my bank account, but they were willing to loan me (at 0% interest) money each month to stay afloat.  \"), mdx(\"p\", null, \"I suddenly found myself in the absurdly codependent situation of being wholly: physically and financially, dependent upon these people for my survival.  \"), mdx(\"p\", null, \"In the beginning, I borrowed little to nothing. I exhausted my savings first; then I cashed out most of my 401k from DrE. I found a realtor who sold the house before the bank foreclosed, and I landed a little from my half of the equity in the home. Le sigh. Inevitably, I had to start borrowing from them month to month to stay afloat. I would only borrow the bare minimum to pay rent, alimony and expenses, but the debt grew like cancer.  \"), mdx(\"p\", null, \"At the time, it did not feel as awkward as it does now in the recounting. Perhaps, in no small part having the anxiety of the foreclosure of the house behind me, the battleground for optimism had once again become to seem ripe for the taking. By August, my alimony payments had dropped considerably. I moved my family into an apartment. We were out of the basement. I did not take the time then to ponder that under nearly any other set of conditions: the house would have sold, that alimony would have become more bearable, that we might not live in my parents\\u2019 basement forever.  \"), mdx(\"p\", null, \"The absence of any form of compensation was certainly the first demonstration of the emergency broadcast system, running on all devices, all the time. Others amassed in different shapes and flavors.  \"), mdx(\"p\", null, \"I had met with the whole team at the end of April, immediately before embarking on this journey. We were nearly 20 in number and spent two full days discussing budgets, timelines, roadmaps and priorities. This meeting was to be one of the tentpoles for my optimism in this new venture: many were joined, a shared vision was present, the group seemed organized, we had a mission.  \"), mdx(\"p\", null, \"Little more than a few weeks later, the duo revealed that other aspects of grant regulations had changed. We would be restricted in our yearly budgeting to spending the total sum of the grant divided by the duration of the grant. So, if our grant were $5 and the grant duration were 5 years, our yearly budget could not exceed $1. This completely dismembered the budget discussions and roadmap planning that had occurred a few weeks prior. We had calculated that we could use nearly 60% of the total grant in the first year to accelerate development and partition the remainder for the remaining years. This revelation eliminated my own budget in its entirety.  \"), mdx(\"p\", null, \"Shortly after starting, I was left with no budget and no auxiliary means to finance development outside of employing myself for longer hours. Certain nominal expenses, such as Slack and Github, were paid from the duo\\u2019s other accounts, but the core infrastructure that would be needed to run our software would be financed from my yet non-existent payroll.  \"), mdx(\"p\", null, \"Still, we were deep in research and development. Lightweight servers with low usage (the duo and I were the primary users) are not expensive\\u200A\\u2014\\u200Athe principle of the issue was offensive, but the cost was not burdensome. Optimism, optimism.  \"), mdx(\"p\", null, \"The zero balance on my budget became more concerning as I began to wrestle against the practical nature of our 24-hour clock. One developer alone, no matter how gifted, had no chance of delivering against our roadmap on our timeline. The duo was generally insistent that no compromises to feature development or delivery times could be accommodated. At a few points, I found prospective college students who might make promising interns, but the duo insisted that any new hires of any type work without compensation in exchange for letters of recommendation\\u200A\\u2014\\u200Aa practice neither myself or any of my applicants could abide.  \"), mdx(\"p\", null, \"Absent any additional hours I could add to the day\\u2019s clock by leveraging new hires, the duo helpfully offered to let their high school aged children babysit my own, while I worked longer hours. Ironically, this was always positioned as a sacrifice the duo were making for XCo, and since Irony has no shame nor heeds no conventions, I soon found myself consistently working 12, 14 and 16 hour days with greater frequency than ever before.  \"), mdx(\"p\", null, \"Within a few months, we had our next company meeting. The group had shrunk rather considerably. We were approximately 10, down from 20, and were discussing radical cutbacks to the original roadmap. Two months later, we were 7.  \"), mdx(\"p\", null, \"The duo began proposing radical changes to our business model: running Kickstarter campaigns, starting a private high school, developing product for companies while the same product (funded by the grant) had yet to be delivered to the university, increasing marketing and sales for their publications. I would get inspired text messages at 4:30am with new ideas. I requested politely that non-critical text messages be deferred until waking hours. The duo informed me that such requests were not \\u201CCTO like\\u201D and that any Silicon Valley CTO would never complain.  \"), mdx(\"p\", null, \"In the last 2 months, the atmosphere began to change radically. Routine weekly meetings were suddenly cancelled, last minute, just before their appointed time. These meetings then magically vanished entirely from my calendar. My own critical Monday meetings with the CEO were suddenly cancelled with terse, \\u201CNothing to discuss this week\\u201D cancellation messages.  \"), mdx(\"p\", null, \"I began sending email summaries of the tech progress on a week by week basis to the CEO. I would detail the work accomplished against the requirements and try to provide estimates. For lack of better eloquence, I felt weird doing this\\u200A\\u2014\\u200Aand I never had a response.  \"), mdx(\"p\", null, \"In the first week of December, I included in my weekly report a summary of all the features that were to be delivered or delayed, based on an aggregate of all my previous progress reports. More suddenly than I was aware possible, I received an immediate response. In ALL CAPITAL LETTERS, the CEO asked who had authorized me to make the decision not to release a feature?  \"), mdx(\"p\", null, \"I think I responded politely. I cannot be sure. By this point, to my mind, I continued to be the nominal CTO of an amorphous confederation of promises, backed by travelers checks of dubious authenticity. Still, I was the CTO. If any person in the company has the authority to determine what technology features go into a release to the public, I hope by the gods below that the CTO is one of them. And where were the responses to all the other emails? How could this news be new news? Why were we not talking in person? How is it conceivable for a CEO to send an ALL CAPS EMAIL? Who does this?  \"), mdx(\"p\", null, \"I responded that I had informed him of the delays several times over the past 3 weeks but had not had a response. I said that the continued cancellation of our tech meetings only hindered the communication of these critical issues.  \"), mdx(\"p\", null, \"More suddenly than before, I received another ALL CAPS EMAIL: \\u201CProvide at least three different forms of proof that you ever communicated this to me.\\u201D  \"), mdx(\"p\", null, \"This was exceedingly easy, but I selected only one. I forwarded him an email in response with delicate golden highlights across my estimates and delivery projections, the dates quite clearly visible.  \"), mdx(\"p\", null, \"Less suddenly, but with the hour, I received a final, standard email. \\u201CChristopher, my lack of acknowledgement is never acceptance of your decisions.\\u201D  \"), mdx(\"p\", null, \"I must admit that I was stunned. A year later, and I still have no response to this; but, I was not done. I am stubbornly optimistic. To faults of faults. And loyal.  \"), mdx(\"p\", null, \"This whole exchange now as forgotten (or at least distant) as possible, we were a mere week or so later discussing a perceived outage on our website. A customer reported it \\u201Cdown\\u201D.  \"), mdx(\"p\", null, \"I logged into the site from my laptop, which seemed fine. I have long subscribed to a VPN service, which among other things, allows me to switch which country I am in. This is terribly useful when developing software for the web, because I can quickly switch to Ireland or China or Argentina and see how my web app behaves from that physical location. This also happens to be extremely useful when trying to determine whether something is \\u201Cup\\u201D or \\u201Cdown\\u201D. Generally Ordinarily, if users in Germany, Russia, China and the UK can all access your website\\u200A\\u2014\\u200Ayour website it \\u201Cup\\u201D. So, I checked. My website was \\u201Cup\\u201D.  \"), mdx(\"p\", null, \"I explained that the global round robin had revealed no issues, to which my CEO said, \\u201CThat\\u2019s great, since we don\\u2019t have any customers in Russia or China.\\u201D  \"), mdx(\"p\", null, \"I explained that in this case, this type of error can happen to any user of any app, anywhere in the world. Typically, we tell people how to reset their systems so that they can reconnect successfully\\u200A\\u2014\\u200Abut there is absolutely nothing wrong with our application or our server.  \"), mdx(\"p\", null, \"My CEO responded, \\u201CGreat. I\\u2019ll let our customers know that our CTO can\\u2019t be bothered to pull his head out of his own ass and fix their problems.\\u201D  \"), mdx(\"p\", null, \"I said, \\u201COK. You should do that.\\u201D  \"), mdx(\"p\", null, \"\\u201CGo fuck yourself.\\u201D  \"), mdx(\"p\", null, \"That was the 10 second moment. Maybe my \\u201COK. You should do that\\u201D line crossed the line. I don\\u2019t know. But the second that I heard those magical 3 words, I knew that I was done.  \"), mdx(\"p\", null, \"In that moment, I began to wonder how I had let it come to this. I was paying an Australian developer (as a contractor) out of my own pocket to help meet deadlines. I was working insane hours. The customers to which the CTO had alluded were really just Cornell University college students, using our app to do their homework for classes the duo\\u2019s taught there. We had no real users. Our roadmap looked like an Asian buffet\\u200A\\u2014\\u200Afried chicken next to pizza next to lo Mein. I had been working in the blind\\u200A\\u2014\\u200Amy boss was not just ignoring me, he was refusing to communicate at all. 8 months into this position, and I still had no official position at all. I was CTO on a mound of dirt.  \"), mdx(\"p\", null, \"So, deep into yet another December, I realized that I needed to leave. I spent a few days trying to patch up my CV, but I began to feel the weight of despair closing in again. Hiring. Interviews. Finding a remote position. Waiting. Desperation. Then it occurred to me\\u200A\\u2014\\u200Asomething that I hadn\\u2019t even realized that I had done (or not done). I left DrE on excellent terms. I spent considerable time making sure their needs were met. DrE and I parted ways more than cordially. DrE told me: if you ever change your mind\\u200A\\u2014\\u200Aif you ever want to come back, we believe in 2nd chances. You are welcome back here.  \"), mdx(\"p\", null, \"Burn your bridges wisely.  \"), mdx(\"p\", null, \"XCo had elements of a mission that I actually think is worthwhile\\u200A\\u2014\\u200Abut everything else about the company is rotting from the outside inside outside in. That bridge, I happily detonated. I quit on the spot.  \"), mdx(\"p\", null, \"I called Edan. He hired me on the spot. DrE embodies the part of humanity that I want to serve, protect and embetter. They treated me well; I treated them well. Mutual respect and decency can make the difference between worlds. I am enormously grateful to have had the opportunity to cross this bridge again.  \"), mdx(\"p\", null, \"As I reflect on the choices I have made in my life and how I have responded to the challenges and opportunities that have risen before me, ultimately, I can find no escape from Optimism.  \"), mdx(\"p\", null, \"As I reflect on the state of our world, while the Darkness surrounding our species feels greater now than ever before, I must believe that winter will pass. There is a Spring waiting. There has to be.  \"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"date":"2017-01-16T00:00:00.000Z","id":"29010c0d-ca3a-556a-a871-5c1d22ec9ae4","slug":"/2017/How-to-Lose-an-Employee-in-10-Seconds-or-Less","subtitle":null,"tags":["management","leadership","hiring","work"],"title":"How to Lose an Employee in 10 Seconds or Less"},"frontmatter":{"title":"How to Lose an Employee in 10 Seconds or Less","subtitle":null,"date":"01/16/2017","tags":["management","leadership","hiring","work"],"background":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAYAQEAAwEAAAAAAAAAAAAAAAAAAQIDBP/aAAwDAQACEAMQAAAB6VMaeXTrKFonn2AD/8QAHBAAAQQDAQAAAAAAAAAAAAAAAwABAhIREyAi/9oACAEBAAEFAiEot+HU7sf3UNtUo5UQ15//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPwEj/8QAFxEAAwEAAAAAAAAAAAAAAAAAERIgIf/aAAgBAgEBPwFhkf/EAB4QAAEEAQUAAAAAAAAAAAAAAAEAECExERIgImFi/9oACAEBAAY/AqyVLeSjxlDXbGL72//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQVEgcYH/2gAIAQEAAT8h1heiYAcPNQbLlhgafmJeGQNDd4vcIFWee5ZHqFgptyhrw//aAAwDAQACAAMAAAAQ+OLP/8QAFREBAQAAAAAAAAAAAAAAAAAAISD/2gAIAQMBAT8QTH//xAAYEQADAQEAAAAAAAAAAAAAAAABEBExQf/aAAgBAgEBPxA0reKBf//EAB4QAQEAAgIDAQEAAAAAAAAAAAERACExQVFhcSCh/9oACAEBAAE/ENFa6KPW+sCuCzeg+Nfx41gAOEpgAsEPY0Xxyce8TYQwL0INbDq7yFoJBIrFPMmSAKGblej5m/1q2Ft0P3BAQIcHX4//2Q==","aspectRatio":0.8,"width":200,"height":250,"src":"/static/aebf415ee4fc6b490b9d1b649a5eb9c8/f836f/cabrera_coat_of_arms.jpg","srcSet":"/static/aebf415ee4fc6b490b9d1b649a5eb9c8/f836f/cabrera_coat_of_arms.jpg 1x,\n/static/aebf415ee4fc6b490b9d1b649a5eb9c8/9dc27/cabrera_coat_of_arms.jpg 1.5x,\n/static/aebf415ee4fc6b490b9d1b649a5eb9c8/2244e/cabrera_coat_of_arms.jpg 2x"}}}},"parent":{"relativePath":"2017/How-to-Lose-an-Employee-in-10-Seconds-or-Less.md"},"tableOfContents":{}},"slug":"/2017/Currying-Favor-with-Partial-Application-to-get-JavaScript-SQL","toc":{"type":"Article"},"title":"Currying Favor with Partial Application to get JavaScript SQL","type":"Article"}},"staticQueryHashes":["2510424212","359992727"]}