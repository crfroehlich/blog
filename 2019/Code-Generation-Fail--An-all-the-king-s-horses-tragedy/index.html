<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="/favicon.svg"/><noscript></noscript><style data-href="/styles.5a4b1461625749aaaf5b.css" id="gatsby-global-css">*{margin:0;padding:0;box-sizing:border-box;font-display:swap}::-webkit-input-placeholder{color:#c2c2c2}:-ms-input-placeholder{color:#c2c2c2}::-ms-input-placeholder{color:#c2c2c2}::placeholder{color:#c2c2c2}body,html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Roboto Light,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;scroll-behavior:smooth}a{transition:color .15s}body{font-family:Roboto}.visibleMobile{display:none}.visibleMobileView{display:none!important}.video-responsive{position:relative;padding-bottom:56.2%}a,a:hover{text-decoration:none}.displayInline{display:inline-block}.navBarToggle{border:0 solid #fff;border-radius:4px;width:36px;height:33px;position:absolute;right:20px;padding:8px 5px;display:none}.navBarToggle .iconBar{display:block;width:22px;height:2px;border-radius:1px;margin:4px auto 0;background-color:#001934}.navBarToggle .iconBar:first-child{margin-top:0}.video-responsive iframe{position:absolute;width:100%;height:100%}.diffNewLine{color:#22863a;background-color:#f0fff4}.diffRemoveLine{color:red;background-color:#fcc}.navBarParent{width:100%;float:left;display:flex;align-items:center}.divider{height:30px;margin:0 15px;border-right:1px solid hsla(0,0%,100%,.3)}.githubIcon{width:15px;margin-right:5px}.githubSection{display:flex;align-items:center;color:#000;opacity:.7}.githubSection:hover{text-decoration:none;opacity:1}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#001933}.headerWrapper{border-bottom:1px solid #d4dadf;box-shadow:0 1px 1px 0 rgba(116,129,141,.1);display:flex;align-items:center}.formElement{background-color:transparent;padding:4px;border-radius:5px;position:relative}.formElement:focus{outline:none;border:none}.formElement svg path{fill:#2fd2c5}.searchInput{width:100%;background-color:rgba(28,211,198,.12)!important;border-width:0!important;color:#c2c2c2;border-radius:5px;color:#fff;opacity:.6;padding:10px 10px 10px 38px;max-width:600px}.searchInput:focus,.searchInput:focus-within,.searchInput:hover,.searchInput:visited{outline:none;border:0}.searchWrapper{padding-left:0;padding-right:20px;flex:1 1;position:relative}.searchWrapper a{font-weight:500}.hitWrapper{background-color:#fff;padding:.7em 1em .4em;border-radius:4px;position:absolute;width:80vw;max-width:30em;top:40px;border:1px solid #ccc;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);height:auto;max-height:80vh;overflow:scroll;left:0}.hitWrapper ul li{margin-top:.7em;padding-top:.7em;border-top:1px solid;list-style-type:none}.hitWrapper ul li:first-child{border-top:0;margin-top:0;color:#000!important;padding:0}.showResults{display:block}.hideResults{display:none}.hitWrapper span{color:#000;font-size:14px}.headerTitle{height:auto;font-size:16px;line-height:1;font-weight:500;color:#fff!important;text-transform:uppercase}.headerTitle a{color:#fff}.headerTitle a:hover{text-decoration:none;opacity:.8}.logoWrapper{padding:21px 0 21px 20px}.logoContent{font-family:Roboto;margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px}.removePadd{padding:0!important}.navBarDefault{background-color:#001934;border-radius:0;margin-bottom:0;border:0;z-index:1;padding:15px;position:relative;height:80px}.navBarDefault,.navBarHeader{display:flex;align-items:center}.navBarHeader{min-width:335px;padding-right:20px}.navBarBrand{padding:0;display:flex;align-items:center}.navBarBrand img{width:120px;margin-right:6px;display:inline-block}.navBarUL{-webkit-overflow-scrolling:touch}.navBarUL li{list-style-type:none}.navBarUL li a{font-family:Roboto;color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1;padding:10px 15px}.navBarNav{display:flex;align-items:center}.navBarUL li a .shareIcon,.navBarUL li a img{width:20px}.navBarUL li a:hover{opacity:.7}pre{border:0!important;background-color:#f5f7f9}blockquote{color:#74818d;margin:0 0 24px;padding:0 0 0 12px;border-left:4px solid;border-color:#e6ecf1}.socialWrapper{display:flex;align-items:center}.socialWrapper li{display:inline-block}.socialWrapper li a{display:contents}.twitterBtn{border-radius:4px;border:1px solid #d1d2d3;background-color:#f1f5f8;width:20px;height:20px;padding-top:2px;margin-left:8px;display:flex;align-items:center;justify-content:center;opacity:.8;cursor:pointer}.twitterBtn img{width:12px!important}.twitterBtn:hover{opacity:1}.sidebarTitle{background-color:#f8f8f8;padding:18px 16px;font-family:Poppins;font-size:18px;font-weight:600;color:#001934;display:flex;align-items:center}.sideBarShow{display:none}.sidebarTitle a{color:#001934}.greenCircle{width:8px;height:8px;background-color:#1cd3c6;border-radius:50%;margin:0 12px}.headerNav{font-family:Roboto;padding:0 24px;color:#001933;font-size:16px;font-weight:500;line-height:1em}.headerNav a{color:#001933}.headerNav a,.headerNav a:hover{text-decoration:none}.logoWrapper img{width:40px}.sideBarUL{margin-top:32px}.sideBarUL li{list-style-type:none;width:auto}.sideBarUL li a{font-size:14px;font-weight:500;line-height:1.5;padding:7px 25px 7px 10px;border:1px solid transparent;border-right:0}.hideFrontLine .collapser{background:transparent;border:none;outline:none;position:absolute;right:20px;z-index:1;cursor:pointer}.hideFrontLine .active>a{background-color:#1ed3c6;color:#fff!important}.firstLevel ul li .collapser svg path{fill:#fff!important}.active .collapser>svg>path{fill:#001933!important}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1}.sideBarUL .item{list-style:none;padding:0}.sideBarUL .item>a{color:#1ed3c6;text-decoration:none;display:flex;align-items:center;position:relative;width:100%;padding-right:35px;padding-left:15px}.showFrontLine .active>a,.showFrontLine .item>a:hover{background-color:#001933}.sideBarUL .item .item{margin-left:16px}.firstLevel>ul>.item{margin-left:0!important}.showFrontLine .item .item{border-left:1px solid #e6ecf1;padding:0;width:calc(100% - 16px)!important}.showFrontLine .item .active>a{border-color:#e6ecf1!important;border-style:solid none solid solid;border-width:1px 0 1px 1px;background-color:#1ed3c6!important;color:#fff}.titleWrapper{padding-bottom:10px;margin-bottom:10px}.gitBtn,.titleWrapper{display:flex;align-items:center}.gitBtn{height:30px;min-height:30px}.gitBtn img{width:15px;display:inline-block;margin-right:5px}.addPaddTopBottom{padding:50px 0}.preRightWrapper{display:block;margin:0;flex:1 1;padding:16px;text-align:right}.smallContent{display:block;margin:0;padding:0;color:#6e6e6e}.smallContent span{font-size:12px;line-height:1.625;font-weight:400}.blogDate{text-align:right;float:right;display:block;margin-left:auto;margin-top:auto;margin-bottom:auto;font-size:large;color:#1ed3c6}.truncate{width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.nextRightWrapper{display:block;margin:0;padding:16px;flex:1 1}table,table tr{padding:0}table tr{border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td :last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}.githubBtn{font-size:16px;padding:10px 0 10px 15px;max-height:40px}.githubBtn,.githubBtn span span{display:flex;align-items:center}.communitySection{font-size:24px;font-weight:700}.authorSection{padding:20px 0}.authorName,.authorSection{display:flex;align-items:center}.authorImg img{width:75px;height:75px;border-radius:50%;min-width:75px;max-width:75px;min-height:75px;max-height:75px}.authorDetails{padding-left:10px}.authorDesc{padding-top:5px;font-size:14px}.authorName img{margin-left:10px;display:inline-block;width:20px}.authorName img:hover{opacity:.7}.heading1{font-size:26px;font-weight:800}.heading1,.heading2{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading2{font-size:24px;font-weight:700}.heading3{font-size:20px;font-weight:600}.heading3,.heading4{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading4{font-size:18px;font-weight:500}.heading5{font-size:16px;font-weight:400}.heading5,.heading6{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading6{font-size:14px;font-weight:300}.paragraph{margin:16px 0 32px;line-height:1.625}.pre{font-size:14px;margin:0;padding:16px;overflow:auto}.poweredBy{font-size:.6em;text-align:end;padding:0}.topnav{margin-left:auto;margin-right:0;-webkit-transition:top .5s,bottom .5s}@media (max-width:767px){.formElement svg path{fill:#001934}.visibleMobileView{display:block!important}.searchInput{color:#001934}.socialWrapper{position:absolute;right:10px;top:29px}.responsive{margin-top:15px;position:relative;padding-bottom:20px;border-top:1px solid #fff}.headerTitle{padding-right:50px;font-size:16px;font-weight:500;line-height:1;margin-top:0}.navBarBrand{min-height:40px}.navBarBrand img{margin-right:8px}.topnav.responsive .visibleMobile{display:block}.topnav .navBarUL{display:none}.topnav.responsive .navBarUL{display:block;text-align:left}.hiddenMobile{display:none!important}hr{margin-top:0;margin-bottom:0}.navBarParent{display:block}.separator{margin-top:20px;margin-bottom:20px}.navBarULRight{position:static}.navBarUL{display:flex;align-items:center;margin:7.5px 0}.navBarUL li{height:37px}.navBarUL li a{font-size:14px;padding:10px 15px}.navBarDefault{display:block;height:auto}.navBarToggle{margin-right:0;display:block;position:absolute;left:11px;top:15px;background:#fff}.navBarHeader{display:flex;min-width:auto;padding-right:0;align-items:center}.navBarBrand{font-size:20px;flex:initial;padding:0 15px 0 0}.titleWrapper{padding:0 15px;display:block}.gitBtn{display:inline-block}.mobileView{text-align:left!important;padding-left:0!important}.searchWrapper{padding:0;bottom:0;width:calc(100% - 70px);position:absolute;left:40px;top:8px}.hitWrapper{width:100%;right:0;top:35px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static}}@media (min-width:768px) and (max-width:991px){.navBarDefault{padding:10px}.navBarBrand{font-size:22px}.navBarHeader{min-width:240px;flex:initial}.githubBtn{padding:10px}.divider{margin:0 5px;height:20px}.hitWrapper{max-width:500px}.navBarUL li a{padding:10px 5px}.searchWrapper{padding-left:0}}code[class*=language-],pre[class*=language-]{color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,Andale Mono,Ubuntu Mono,Courier New,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#75a7ca}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e}:not(pre)>code[class*=language-]{border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:.9375em;background:#001933}.namespace{opacity:.7}.token.doctype .token.doctype-tag{color:#569cd6}.token.doctype .token.name{color:#9cdcfe}.token.comment,.token.prolog{color:#6a9955}.language-html .language-css .token.punctuation,.language-html .language-javascript .token.punctuation,.token.punctuation{color:#d4d4d4}.token.boolean,.token.constant,.token.inserted,.token.number,.token.property,.token.symbol,.token.tag,.token.unit{color:#b5cea8}.token.attr-name,.token.builtin,.token.char,.token.deleted,.token.selector,.token.string{color:#ce9178}.language-css .token.string.url{text-decoration:underline}.token.entity,.token.operator{color:#d4d4d4}.token.operator.arrow{color:#569cd6}.token.atrule{color:#ce9178}.token.atrule .token.rule{color:#c586c0}.token.atrule .token.url{color:#9cdcfe}.token.atrule .token.url .token.function{color:#dcdcaa}.token.atrule .token.url .token.punctuation{color:#d4d4d4}.token.keyword{color:#569cd6}.token.keyword.control-flow,.token.keyword.module{color:#c586c0}.token.function,.token.function .token.maybe-class-name{color:#dcdcaa}.token.regex{color:#d16969}.token.important{color:#569cd6}.token.italic{font-style:italic}.token.constant{color:#9cdcfe}.token.class-name,.token.maybe-class-name{color:#4ec9b0}.token.console,.token.interpolation,.token.parameter{color:#9cdcfe}.token.boolean,.token.punctuation.interpolation-punctuation{color:#569cd6}.token.exports .token.maybe-class-name,.token.imports .token.maybe-class-name,.token.property,.token.variable{color:#9cdcfe}.token.escape,.token.selector{color:#d7ba7d}.token.tag{color:#569cd6}.token.cdata,.token.tag .token.punctuation{color:grey}.token.attr-name{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation{color:#ce9178}.token.attr-value .token.punctuation.attr-equals{color:#d4d4d4}.token.entity{color:#569cd6}.token.namespace{color:#4ec9b0}code[class*=language-javascript],code[class*=language-jsx],code[class*=language-tsx],code[class*=language-typescript],pre[class*=language-javascript],pre[class*=language-jsx],pre[class*=language-tsx],pre[class*=language-typescript]{color:#9cdcfe}code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#d4d4d4}.language-regex .token.anchor{color:#dcdcaa}.language-html .token.punctuation{color:grey}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;z-index:0;pointer-events:none;line-height:inherit;white-space:pre}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}@keyframes swing{0%,30%,50%,70%,to{transform:rotate(0deg)}10%{transform:rotate(10deg)}40%{transform:rotate(-10deg)}60%{transform:rotate(5deg)}80%{transform:rotate(-5deg)}}.pro-sidebar{color:#fff;height:100%;width:297px;min-width:297px;text-align:left;transition:width,left,right,.3s;position:relative;z-index:1009}.pro-sidebar>.pro-sidebar-inner{background:#33475b;height:100%;position:relative;z-index:101}.pro-sidebar>.pro-sidebar-inner>img.sidebar-bg{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;position:absolute;opacity:.3;left:0;top:0;z-index:100}.pro-sidebar>.pro-sidebar-inner>.pro-sidebar-layout{height:100%;overflow-y:auto;overflow-x:hidden;position:relative;display:flex;flex-direction:column;z-index:101}.pro-sidebar>.pro-sidebar-inner>.pro-sidebar-layout .pro-sidebar-content{flex-grow:1}.pro-sidebar>.pro-sidebar-inner>.pro-sidebar-layout ul{list-style-type:none;padding:0;margin:0}.pro-sidebar .overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3);z-index:100;display:none}.pro-sidebar.collapsed{width:80px;min-width:80px}.pro-sidebar.rtl{text-align:right;direction:rtl}@media (max-width:480px){.pro-sidebar.xs{position:fixed;left:-297px}.pro-sidebar.xs.collapsed{left:-80px}.pro-sidebar.xs.toggled{left:0}.pro-sidebar.xs.toggled .overlay{display:block}.pro-sidebar.xs.rtl{left:auto;right:-297px}.pro-sidebar.xs.rtl.collapsed{left:auto;right:-80px}.pro-sidebar.xs.rtl.toggled{left:auto;right:0}}@media (max-width:576px){.pro-sidebar.sm{position:fixed;left:-297px}.pro-sidebar.sm.collapsed{left:-80px}.pro-sidebar.sm.toggled{left:0}.pro-sidebar.sm.toggled .overlay{display:block}.pro-sidebar.sm.rtl{left:auto;right:-297px}.pro-sidebar.sm.rtl.collapsed{left:auto;right:-80px}.pro-sidebar.sm.rtl.toggled{left:auto;right:0}}@media (max-width:768px){.pro-sidebar.md{position:fixed;left:-297px}.pro-sidebar.md.collapsed{left:-80px}.pro-sidebar.md.toggled{left:0}.pro-sidebar.md.toggled .overlay{display:block}.pro-sidebar.md.rtl{left:auto;right:-297px}.pro-sidebar.md.rtl.collapsed{left:auto;right:-80px}.pro-sidebar.md.rtl.toggled{left:auto;right:0}}@media (max-width:992px){.pro-sidebar.lg{position:fixed;left:-297px}.pro-sidebar.lg.collapsed{left:-80px}.pro-sidebar.lg.toggled{left:0}.pro-sidebar.lg.toggled .overlay{display:block}.pro-sidebar.lg.rtl{left:auto;right:-297px}.pro-sidebar.lg.rtl.collapsed{left:auto;right:-80px}.pro-sidebar.lg.rtl.toggled{left:auto;right:0}}@media (max-width:1200px){.pro-sidebar.xl{position:fixed;left:-297px}.pro-sidebar.xl.collapsed{left:-80px}.pro-sidebar.xl.toggled{left:0}.pro-sidebar.xl.toggled .overlay{display:block}.pro-sidebar.xl.rtl{left:auto;right:-297px}.pro-sidebar.xl.rtl.collapsed{left:auto;right:-80px}.pro-sidebar.xl.rtl.toggled{left:auto;right:0}}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item:before{display:inline-block;width:4px;min-width:4px;height:4px;border:1px solid #33475b;border-radius:50%;margin-right:15px;position:relative;box-shadow:1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,-1px 0 0 #fff}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item>.pro-item-content{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pro-sidebar .pro-menu{padding-top:10px;padding-bottom:10px}.pro-sidebar .pro-menu>ul>.pro-sub-menu>.pro-inner-list-item{position:relative;background-color:#33475b}.pro-sidebar .pro-menu>ul>.pro-sub-menu>.pro-inner-list-item>div>ul{padding-top:15px;padding-bottom:15px}.pro-sidebar .pro-menu a{text-decoration:none;color:#fff}.pro-sidebar .pro-menu a:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-color:transparent}.pro-sidebar .pro-menu a:hover{color:orange}.pro-sidebar .pro-menu .pro-menu-item{font-size:15px}.pro-sidebar .pro-menu .pro-menu-item.active{color:orange}.pro-sidebar .pro-menu .pro-menu-item .suffix-wrapper{opacity:1;transition:opacity .2s}.pro-sidebar .pro-menu .pro-menu-item .prefix-wrapper{display:flex;margin-right:5px;opacity:1;transition:opacity .2s}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item{position:relative;display:flex;align-items:center;padding:8px 35px 8px 20px;cursor:pointer}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item:focus{outline:none;color:orange}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item>.pro-icon-wrapper{margin-right:10px;font-size:14px;width:20px;min-width:20px;height:20px;line-height:20px;text-align:center;display:inline-block}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item>.pro-icon-wrapper .pro-icon{display:flex;height:100%;align-items:center;justify-content:center;padding-right:10px}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item>.pro-item-content{flex-grow:1;flex-shrink:1}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item:hover{color:orange}.pro-sidebar .pro-menu .pro-menu-item>.pro-inner-item:hover .pro-icon-wrapper .pro-icon{animation:swing .5s ease-in-out 1 alternate}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu>.pro-inner-item:before{background:#fff}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu>.pro-inner-item>.pro-arrow-wrapper{position:absolute;right:20px;top:50%;transform:translateY(-50%)}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu>.pro-inner-item>.pro-arrow-wrapper .pro-arrow{display:inline-block;border-color:#fff;border-style:solid;border-width:0 2px 2px 0;padding:2.5px;vertical-align:middle;transition:transform .3s;transform:rotate(-45deg)}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu.open>.pro-inner-item:before{background:transparent!important}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu.open>.pro-inner-item>.pro-arrow-wrapper .pro-arrow{transform:rotate(45deg)}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item{padding-left:20px}.pro-sidebar .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item{padding:8px 30px 8px 15px}.pro-sidebar .pro-menu.shaped .pro-menu-item>.pro-inner-item>.pro-icon-wrapper{background-color:#33475b}.pro-sidebar .pro-menu.round .pro-menu-item>.pro-inner-item>.pro-icon-wrapper,.pro-sidebar .pro-menu.square .pro-menu-item>.pro-inner-item>.pro-icon-wrapper{border-radius:4px}.pro-sidebar .pro-menu.circle .pro-menu-item>.pro-inner-item>.pro-icon-wrapper{border-radius:50%}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item{position:relative}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item>.pro-inner-item>.prefix-wrapper,.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item>.pro-inner-item>.suffix-wrapper{opacity:0}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item>.pro-inner-list-item{background-color:#2b2b2b;z-index:111}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item:before{content:"";display:inline-block;position:absolute;top:0;bottom:0;left:0;right:0;cursor:pointer}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu{position:relative}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-item{pointer-events:none}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-item>.pro-arrow-wrapper{display:none}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item{height:auto!important;position:fixed;visibility:hidden;min-width:220px;max-width:270px;background-color:transparent;max-height:100%;padding-left:3px}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item.has-arrow{padding-left:10px}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item>.popper-inner{max-height:100vh;overflow-y:auto;background-color:#2b2b2b;padding-left:20px;border-radius:4px}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu:hover>.pro-inner-list-item{transition:visibility,transform .3s;visibility:visible}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu:hover .pro-icon-wrapper .pro-icon{animation:swing .5s ease-in-out 1 alternate}.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item,.pro-sidebar.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-sub-menu-item{padding:8px 30px 8px 5px}.pro-sidebar.rtl .pro-menu .pro-menu-item .prefix-wrapper{margin-right:0;margin-left:5px}.pro-sidebar.rtl .pro-menu .pro-menu-item>.pro-inner-item{padding:8px 20px 8px 35px}.pro-sidebar.rtl .pro-menu .pro-menu-item>.pro-inner-item>.pro-icon-wrapper{margin-right:0;margin-left:10px}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu>.pro-inner-item>.pro-arrow-wrapper{right:auto;left:20px}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu>.pro-inner-item>.pro-arrow-wrapper .pro-arrow{transform:rotate(135deg)}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu.open>.pro-inner-item>.pro-arrow-wrapper .pro-arrow{transform:rotate(45deg)}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item{padding-left:0;padding-right:20px}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item{padding:8px 15px 8px 30px}.pro-sidebar.rtl .pro-menu .pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item:before{margin-right:0;margin-left:15px}.pro-sidebar.rtl.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item{padding-left:0;padding-right:3px}.pro-sidebar.rtl.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item.has-arrow{padding-right:10px}.pro-sidebar.rtl.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu>.pro-inner-list-item>.popper-inner{padding-left:0;padding-right:20px}.pro-sidebar.rtl.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-inner-item,.pro-sidebar.rtl.collapsed .pro-menu>ul>.pro-menu-item.pro-sub-menu .pro-inner-list-item .pro-sub-menu-item{padding:8px 5px 8px 30px}.popper-arrow{position:absolute;z-index:-1;width:0;height:0;border-top:7px solid transparent;border-bottom:7px solid transparent}.popper-element[data-popper-placement^=left]>.popper-arrow{right:0;border-right:7px solid #2b2b2b}.popper-element[data-popper-placement^=right]>.popper-arrow{left:0;border-left:7px solid #2b2b2b}.react-slidedown{height:0;transition-property:none;transition-duration:.2s;transition-timing-function:ease-in-out}.react-slidedown.transitioning{overflow-y:hidden}.react-slidedown.closed{display:none}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}</style><meta name="generator" content="Gatsby 2.27.3"/><title data-react-helmet="true"></title><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Poppins:300,400,500,600" rel="stylesheet"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WZTYEG3VZJ"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-WZTYEG3VZJ'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-WZTYEG3VZJ', options);
  </script><link rel="icon" href="/favicon-32x32.png" type="image/png"/><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"/><meta name="theme-color" content="#6b37bf"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link rel="alternate" type="application/rss+xml" title="Hiking My Desk RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-3d39879d2f565c5f382d.js"/><link as="script" rel="preload" href="/styles-84a9bc99193fe5828ffe.js"/><link as="script" rel="preload" href="/framework-fc1db31f678bd7aa66d8.js"/><link as="script" rel="preload" href="/a9a7754c-8f76031e99554fb9676e.js"/><link as="script" rel="preload" href="/958b4c57-de047c1242e11b7f8058.js"/><link as="script" rel="preload" href="/c943faba-8cfcfdbf099e99c933af.js"/><link as="script" rel="preload" href="/af13d906-bea834845607db013d0c.js"/><link as="script" rel="preload" href="/ec1189df-f260dd1c0932c92ef80f.js"/><link as="script" rel="preload" href="/app-a554c8c208cd7457f649.js"/><link as="script" rel="preload" href="/component---src-templates-article-tsx-dce0fe11c4877ae00826.js"/><link as="fetch" rel="preload" href="/page-data/2019/Code-Generation-Fail--An-all-the-king-s-horses-tragedy/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2510424212.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/359992727.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="erepz1">.css-erepz1{background:#001933;}</style><div class="css-erepz1 e1fggvjw1"><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-3"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-10"><h1 class="MuiTypography-root jss3 MuiTypography-h1 MuiTypography-gutterBottom">Code Generation Fail</h1><h6 class="MuiTypography-root jss4 MuiTypography-subtitle1"> An all the king’s horses tragedy</h6></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-2"><a class="MuiButtonBase-root MuiButton-root MuiButton-contained jss1" tabindex="0" aria-disabled="false" href="https://github.com/crfroehlich/blog/tree/main/content/2019/Code-Generation-Fail--An-all-the-king-s-horses-tragedy.md"><span class="MuiButton-label"><span class="MuiButton-startIcon MuiButton-iconSizeMedium"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></span>Edit</span></a></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-true"><div class="jss7"><a class="jss9" href="/тег/metadata"><span class="MuiBadge-root jss8"><div class="MuiChip-root jss10"><span class="MuiChip-label">metadata</span></div><span class="MuiBadge-badge MuiBadge-anchorOriginTopRightRectangle MuiBadge-colorPrimary">3</span></span></a><a class="jss9" href="/тег/retrospective"><span class="MuiBadge-root jss8"><div class="MuiChip-root jss10"><span class="MuiChip-label">retrospective</span></div><span class="MuiBadge-badge MuiBadge-anchorOriginTopRightRectangle MuiBadge-colorPrimary">3</span></span></a><a class="jss9" href="/тег/code"><span class="MuiBadge-root jss8"><div class="MuiChip-root jss10"><span class="MuiChip-label">code</span></div><span class="MuiBadge-badge MuiBadge-anchorOriginTopRightRectangle MuiBadge-colorPrimary">21</span></span></a><a class="jss9" href="/тег/generation"><span class="MuiBadge-root jss8"><div class="MuiChip-root jss10"><span class="MuiChip-label">generation</span></div><span class="MuiBadge-badge MuiBadge-anchorOriginTopRightRectangle MuiBadge-colorPrimary">3</span></span></a></div></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-true"><div><h4 class="MuiTypography-root jss12 MuiTypography-h4 MuiTypography-gutterBottom" date="Wed Jul 10 2019 00:00:00 GMT+0000 (Coordinated Universal Time)" title="Wednesday, 07/10/2019">среда, 10.07.2019 г.</h4></div></div></div><style data-emotion-css="nr7pou">.css-nr7pou{max-width:750px;color:#fff;}.css-nr7pou ul,.css-nr7pou ol{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0px;padding:0px 0px 0px 2em;}.css-nr7pou ul li,.css-nr7pou ol li{font-size:16px;line-height:1.8;font-weight:400;}.css-nr7pou a{-webkit-transition:color 0.15s;transition:color 0.15s;color:#1ED3C6;}.css-nr7pou code{border-radius:10px;}@media (max-width:767px){.css-nr7pou{padding:0 15px;}}</style><div class="css-nr7pou e1fggvjw0"><p>Sometimes best intentions and good ole fashioned elbow grease are no match against the tyrannical fist of Reality. In my <a href="https://blog.luddites.me/2019/Code-Generation--Connecting-T4-to-Entity-Framework-Core">previous post</a>, I discussed some of the initial ambitions and achievements in my attempt to convert the Entity Framework Core + MVC project into a dynamically generated template using T4. The good news? T4 is a perfectly adequate way to generate code from templates. The bad news? There is no way to make this completely integrated in a pure .NET Core project. What does this mean, and why is this a problem?  </p><h3>The Story</h3><p>Full disclosure: if you want something approximating a tldr; just skip to the next section.  </p><p>For starters, the beauty of .NET Core is that I can compile and run a .NET Core app as easily on my Pixelbook as I can on my Windows devices. Getting a Core app up and running is just a <code class="language-text">git clone</code> and <code class="language-text">dotnet build</code> away! This simplicity is bruised, battered and beaten when we can’t run the transforms required to generate that code. In an ideal world, when I run <code class="language-text">dotnet build</code> on the <a href="https://github.com/crfroehlich/autoEcMvc">AutoEcMvc</a> solution, the CodeGeneration project would compile and output the generated code into the AutoEcMvc project, which would then compile.  </p><p>If this worked, the project could then drop seamlessly into Azure Pipelines which would automatically compile, test and deploy the project to my Azure app container! (It should be noted, I can still make this work, but it’s extra work that should be unnecessary).  </p><p>Before I dive into the full autopsy of the deceased dream, I’ll explain my temporary solution and a few alternatives that I considered. For reasons that I’ll explain momentarily, the only way for even <code class="language-text">msbuild</code> to work with a T4 project is to base the project on .NET Framework. In order to keep the T4 free from compilation issues (because Text Transformation happens <em>before</em> build, you can find yourself in a situation where the solution cannot compile without some minor hacking), I find it useful to keep the C# backing code for the templates in its own project. Unfortunately, the minimum project type that will work is .NET Standard (.NET Framework will also work, but the goal is to get as close to .NET Core as possible). For these reasons, my current solution’s solution has three projects, in build order: CodeGeneration (.NET Standard) &gt; T4 (.NET Framework) &gt; AutoEcMvc (.NET Core). CodeGeneration has only the utility functions required for the T4 project, which has only the metadata JSON and TT files, and AutoEcMvc has the user defined and generated content together. In another chapter, we’ll remove generated code from source control entirely, but for now I’m leaving it in place as a way to easily review and compare changes with the original project.  </p><p>With this configuration, msbuild works seamlessly and I’ll update my Azure Pipeline to use msbuild and get my CI/CD plans back on track. I’m less than thrilled with having to throw <code class="language-text">dotnet build</code> under the bus, but I’ve also spent more hours trying to crack this nut than I want — and I have whales need fryin’.  </p><p>Before I completely abandoned the dream of a pure .NET Core solution, I explored a few options. There is <a href="https://github.com/daveaglick/Scripty">Scripty</a>, which “lets you use Roslyn-powered C# scripts for code generation. You can think of it as a scripted alternative to T4 templates.” While it sounds promising, the project hasn’t been updated in a while and seems to have outstanding issues with .NET Core. There is also the issue of documentation — any <a href="https://github.com/daveaglick/Scripty/issues/104">examples</a> of converting a T4 template to Scripty would be enormously helpful. Another promising option was <a href="https://github.com/atifaziz/t5">T5</a>, but no amount of tinkering prevailed against the ineffable and inscrutable refusal from Core to comply. Finally, there is <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/page?view=aspnetcore-2.2&amp;tabs=visual-studio">scaffolding</a> built into ASP.NET Core, but this is specific to Razor pages and not really a way to keep generated code in sync with metadata in the way I want to use it.  </p><p>Absent other ideas, T4 still seems like the best approach without a major rewrite. I should note, my specific use of T4 is not terribly complicated, and it would be easy to ditch the templates altogether and simply write the code entirely in C#, but then it would cease to be generic and defeat the purpose of this little exercise. I may emerge from this experiment with a different opinion, but for now I’ll assume that T4 will remain the backbone of the project (until proven differently).  </p><p>As always, this has been a long winded series of asides, a slow and drifting detour from the main point: T4 and .NET Core do not mix. The latter does not abide the former. There is hostility, vitriol and threats of malice aforethought between the two. How do I know this?  </p><h3>My Current “Solution”</h3><p>To understand the problems with trying to migrate T4 into .NET Core, I think it useful to explain the challenges presented in .NET Framework. There are two paths to text transformation.  </p><p>The first is a developer convenience baked directly into Visual Studio since at least 2015. When you add a new <code class="language-text">.tt</code> file into a project, VS immediately recognizes the template and offers a few convenience options for you as a developer: (1) whenever you save changes to the template, VS immediately runs text transform and the output is regenerated, (2) VS gives context menu options to manually transform (aka Run Custom Tool) and to debug the template, which will launch the debugger and allow you to set breakpoints anywhere, and (3) VS offers the option to run all transforms at the project/solution level. All of these features are hugely beneficial to the development of templates. But. And this is a big “but”.  </p><p>The second is through <code class="language-text">msbuild</code> which is what I would normally use in my CI pipeline. Msbuild launches text transform in a different context than VS, which means that the relative paths (e.g. <code class="language-text">$(SolutionDir)</code> )that work in VS no longer work from msbuild.  </p><p>In order to reconcile the two different behaviors, we need to make some changes to the <code class="language-text">.csproj</code> file. Unfortunately, a project using .NET Framework has to be unloaded to be edited, then reloaded. Personally, I edit the project file directly in VS Code and let VS trigger the reload warning after I save changes. This is tedious, but it eliminates a few right-clicks.  </p><p>If we start with a <a href="https://github.com/crfroehlich/AutoEcMvc/blob/master/T4/templates/imports.ttinclude">T4 import</a> that looks like this:  </p><div class="gatsby-highlight" data-language="t4"><pre class="language-t4"><code class="language-t4">#&gt;<span class="token block"><span class="token directive block"><span class="token delimiter important">&lt;#@</span><span class="token content"> <span class="token keyword">assembly</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$(SolutionDir)CodeGeneration\\bin\\netstandard2.0\\CodeGeneration.Dll<span class="token punctuation">&quot;</span></span>  
</span><span class="token delimiter important">#&gt;</span></span></span><span class="token block"><span class="token directive block"><span class="token delimiter important">&lt;#@</span><span class="token content"> <span class="token keyword">assembly</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$(SolutionDir)CodeGeneration\\bin\\netstandard2.0\\Newtonsoft.Json.Dll<span class="token punctuation">&quot;</span></span>  
</span><span class="token delimiter important">#&gt;</span></span></span><span class="token block"><span class="token directive block"><span class="token delimiter important">&lt;#@</span><span class="token content"> <span class="token keyword">import</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Newtonsoft.Json<span class="token punctuation">&quot;</span></span>  
</span><span class="token delimiter important">#&gt;</span></span></span><span class="token block"><span class="token directive block"><span class="token delimiter important">&lt;#@</span><span class="token content"> <span class="token keyword">import</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Newtonsoft.Json.Linq<span class="token punctuation">&quot;</span></span>  
</span><span class="token delimiter important">#&gt;</span></span></span><span class="token block"><span class="token directive block"><span class="token delimiter important">&lt;#@</span><span class="token content"> <span class="token keyword">import</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>CodeGeneration<span class="token punctuation">&quot;</span></span> </span><span class="token delimiter important">#&gt;</span></span></span>  </code></pre></div><p>we have two immediate problems. <code class="language-text">$(SolutionDir)</code> cannot resolve outside of VS, and our 3rd party dependency on Newtonsoft will not be available from the <code class="language-text">bin</code> directory. Starting with the latter, you can add this into a property group in the project file:  </p><div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CopyLocalLockFileAssemblies</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CopyLocalLockFileAssemblies</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  </code></pre></div><p>Now, all reference binaries will be copied into the build output directory.  </p><p>Next, the challenge of resolving the path to that output directory can be solved as well. A custom mapping is required, which is also possible with a little XML markup:  </p><div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetFolder</span><span class="token punctuation">&gt;</span></span>$(MSBuildProjectDirectory)\\..\\CodeGeneration\\bin\\netstandard2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targetFolder</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T4ParameterValues</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>targetFolder<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Value</span><span class="token punctuation">&gt;</span></span>$(targetFolder)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Value</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>T4ParameterValues</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>  </code></pre></div><p>Now, I can update the T4 imports to:  </p><div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml">#&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#@</span> <span class="token attr-name">assembly</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$(targetFolder)\\CodeGeneration.Dll<span class="token punctuation">&quot;</span></span>  
<span class="token attr-name">#</span><span class="token punctuation">&gt;</span></span>&lt;#@ assembly name=&quot;$(targetFolder)\\Newtonsoft.Json.Dll&quot;  </code></pre></div><p>And this will work seamlessly between VS and msbuild. There are a few other changes to make, but these are much more clearly documented elsewhere. For reference here, you also need:  </p><div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Import</span> <span class="token attr-name">Project</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$(MSBuildToolsPath)\\Microsoft.CSharp.targets<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
  <span class="token comment">&lt;!-- Get the Visual Studio version: --&gt;</span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VisualStudioVersion</span> <span class="token attr-name">Condition</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#x27;</span>$(VisualStudioVersion)<span class="token punctuation">&#x27;</span> == <span class="token punctuation">&#x27;</span><span class="token punctuation">&#x27;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>16.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VisualStudioVersion</span><span class="token punctuation">&gt;</span></span>  
  <span class="token comment">&lt;!-- Keep the next element all on one line: --&gt;</span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VSToolsPath</span> <span class="token attr-name">Condition</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#x27;</span>$(VSToolsPath)<span class="token punctuation">&#x27;</span> == <span class="token punctuation">&#x27;</span><span class="token punctuation">&#x27;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>$(MSBuildExtensionsPath32)\\Microsoft\\VisualStudio\\v$(VisualStudioVersion)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VSToolsPath</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
<span class="token comment">&lt;!-- This is the important line: --&gt;</span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Import</span> <span class="token attr-name">Project</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$(VSToolsPath)\\TextTemplating\\Microsoft.TextTemplating.targets<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TransformOnBuild</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TransformOnBuild</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OverwriteReadOnlyOutputFiles</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OverwriteReadOnlyOutputFiles</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TransformOutOfDateOnly</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TransformOutOfDateOnly</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RunPostBuildEvent</span><span class="token punctuation">&gt;</span></span>Always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RunPostBuildEvent</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>  </code></pre></div><p>This is the final glue to ensure that you get identical behavior when compiling the project from any direction.  </p><p>Once all these pieces are in place, msbuild should <strong>just work</strong>.  </p><p>References:  </p><ul><li><a href="https://docs.microsoft.com/en-us/visualstudio/modeling/t4-parameter-directive?view=vs-2019">T4 Parameter Directive</a>  </li><li><a href="https://docs.microsoft.com/en-us/visualstudio/modeling/code-generation-in-a-build-process?view=vs-2019#parameters">Pass build context data into the templates</a>  </li><li><a href="https://github.com/clariuslabs/TransformOnBuild">TransformOnBuild</a> (I didn’t end up using this solution, but exploring the project helped me resolve some issues)  </li></ul><h3>My Struggle</h3><p>The next time I run into this class of problem, I definitely want to track all of my uncommitted changes and correlate each attempted fix with the relevant errors that occur which drive me to all the URLs and searches for answers as I attempt each new iteration of the fix. Then, ideally, I could blog about each stage of the journey with a little more coherence. For now and for the sake of the reader, I will simply list all of the relevant bits (that I can find in my browser history) that have led me to the conclusion that (as of this moment) T4 and Core cannot coexist.  </p><p>Incomplete Solutions:  </p><ul><li><a href="https://github.com/mono/t4">Re-implementation of T4 in Mono</a>  </li><li><a href="https://notquitepure.info/2018/12/12/T4-Templates-at-Build-Time-With-Dotnet-Core/">T4 Templates at Build Time with Dotnet Core</a>  </li><li><a href="https://marketplace.visualstudio.com/items?itemName=TimMaes.ttexecuter">T4Executer</a>  </li></ul><p>Relevant GitHub Issues:  </p><ul><li><a href="https://github.com/xamarin/TorchSharp/issues/27">dotnet build fails to generate TypeGeneration.cs on linux</a>  </li><li><a href="https://github.com/mono/t4/issues/12">Add MSBuild targets package</a>  </li><li><a href="https://github.com/dotnet/core/issues/2743">Several FileNotFoundException using Newtonsoft.Json inside T4 template</a>  </li><li><a href="https://github.com/dotnet/core/issues/2000">FileNotFoundException (System.Runtime, Version=4.2.1.0) when reflecting in T4 template</a>  </li><li><a href="https://github.com/nil4/dotnet-transform-xdt/issues/16">Package type ‘DotnetCliTool’ is not supported by project</a>  </li><li><a href="https://github.com/mono/t4/issues/42">PlatformNotSupportedException with dotnet-t4-project-tool</a>  </li><li><a href="https://github.com/dotnet-websharper/core/issues/903">build failing — and what worked for me</a>  </li></ul><p>Relevant StackOverflow Issues:  </p><ul><li><a href="https://stackoverflow.com/questions/17170080/t4-subtemplates-transformtext-not-working">T4 subtemplates TransformText() not working</a>  </li><li><a href="https://stackoverflow.com/questions/47691299/texttemplating-target-in-a-net-core-project">TextTemplating target in a .Net Core project</a>  </li><li><a href="https://stackoverflow.com/questions/50471751/the-imported-project-c-program-files-dotnet-sdk-2-1-201-microsoft-visualstudio">The imported project “C:<!-- -->\<!-- -->Program Files<!-- -->\<!-- -->dotnet<!-- -->\<!-- -->sdk<!-- -->\<!-- -->2.1.201<!-- -->\<!-- -->Microsoft<!-- -->\<!-- -->VisualStudio<!-- -->\<!-- -->v15.0<!-- -->\<!-- -->WebApplications<!-- -->\<!-- -->Microsoft.WebApplication.targets” was not found</a>  </li></ul><p>Microsoft Docs:  </p><ul><li><a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.texttemplating.texttransformation?view=visualstudiosdk-2019">TextTransformation Class</a>  </li><li><a href="https://developercommunity.visualstudio.com/idea/535990/filenotfoundexception-systemruntime-version4210-wh.html">FileNotFoundException (System.Runtime, Version=4.2.1.0) when reflecting in T4 template in .NET Core 2.1 app</a>  </li></ul><p>As always, I hope this has helped someone with a similar quest. Please feel free to correct anything I have missed, suggest corrections or alternatives, or otherwise reach out to collaborate on solutions for this journey.  </p></div><div id="comment_div"><div id="commento"></div></div><div class="addPaddTopBottom"><style data-emotion-css="1lbctsv">.css-1lbctsv{margin:0px;padding:0px;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px);}.css-1lbctsv .previousBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230,236,241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116,129,141,0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#001933;color:#fff;}.css-1lbctsv .nextBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230,236,241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116,129,141,0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#001933;color:#fff;}.css-1lbctsv .nextBtn:hover,.css-1lbctsv .previousBtn:hover{-webkit-text-decoration:none;text-decoration:none;border:1px solid #1ed3c6;}.css-1lbctsv .nextBtn:hover .rightArrow,.css-1lbctsv .previousBtn:hover .leftArrow{color:#1ed3c6;}.css-1lbctsv .leftArrow{display:block;margin:0px;color:rgb(157,170,182);-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-right:16px;}.css-1lbctsv .rightArrow{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-left:16px;display:block;margin:0px;color:rgb(157,170,182);}.css-1lbctsv .nextPreviousTitle{display:block;margin:0px;padding:0px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;}.css-1lbctsv .nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500;}@media (max-width:767px){.css-1lbctsv{display:block;padding:0 15px;}.css-1lbctsv .previousBtn{margin-bottom:20px;}}</style><div class="css-1lbctsv ehy5sm0"><a title="Blogging to the Oldies" class="previousBtn" href="/2020/blogging_to_the_oldies"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-alt-left" class="svg-inline--fa fa-arrow-alt-left fa-w-14 fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="padding-left:5px"><path fill="currentColor" d="M448 208v96c0 13.3-10.7 24-24 24H224v103.8c0 21.4-25.8 32.1-41 17L7 273c-9.4-9.4-9.4-24.6 0-34L183 63.3c15.1-15.1 41-4.4 41 17V184h200c13.3 0 24 10.7 24 24z"></path></svg><div class="preRightWrapper"><div class="smallContent"><span>воскресенье, 04.10.2020 г.</span></div><div class="nextPreviousTitle"><span>Blogging to the Oldies</span></div></div></a><a title="Code Generation: Connecting T4 to Entity Framework Core" class="nextBtn" href="/2019/Code-Generation--Connecting-T4-to-Entity-Framework-Core"><div class="nextRightWrapper"><div class="smallContent"><span>понедельник, 08.07.2019 г.</span></div><div class="nextPreviousTitle"><span>Code Generation: Connecting T4 to Entity Framework Core</span></div></div><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-alt-right" class="svg-inline--fa fa-arrow-alt-right fa-w-14 fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="padding-right:5px"><path fill="currentColor" d="M0 304v-96c0-13.3 10.7-24 24-24h200V80.2c0-21.4 25.8-32.1 41-17L441 239c9.4 9.4 9.4 24.6 0 34L265 448.7c-15.1 15.1-41 4.4-41-17V328H24c-13.3 0-24-10.7-24-24z"></path></svg></a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2019/Code-Generation-Fail--An-all-the-king-s-horses-tragedy";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-b87b4272e8117be8b956.js"],"app":["/app-a554c8c208cd7457f649.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-fd4fb51a6fac1c18bdde.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-b2f57f58b290110245c0.js"],"component---src-templates-article-tsx":["/component---src-templates-article-tsx-dce0fe11c4877ae00826.js"],"component---src-templates-label-tsx":["/component---src-templates-label-tsx-42eb4f75d70885ea98fa.js"],"component---src-templates-source-tsx":["/component---src-templates-source-tsx-8ec8f20c56318d70eff6.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-761b6a9a88f1720c9518.js"],"component---src-templates-визуализации-tsx":["/component---src-templates-визуализации-tsx-f0b0ac815c53784a2631.js"]};/*]]>*/</script><script src="/polyfill-b87b4272e8117be8b956.js" nomodule=""></script><script src="/component---src-templates-article-tsx-dce0fe11c4877ae00826.js" async=""></script><script src="/app-a554c8c208cd7457f649.js" async=""></script><script src="/ec1189df-f260dd1c0932c92ef80f.js" async=""></script><script src="/af13d906-bea834845607db013d0c.js" async=""></script><script src="/c943faba-8cfcfdbf099e99c933af.js" async=""></script><script src="/958b4c57-de047c1242e11b7f8058.js" async=""></script><script src="/a9a7754c-8f76031e99554fb9676e.js" async=""></script><script src="/framework-fc1db31f678bd7aa66d8.js" async=""></script><script src="/styles-84a9bc99193fe5828ffe.js" async=""></script><script src="/webpack-runtime-3d39879d2f565c5f382d.js" async=""></script></body></html>